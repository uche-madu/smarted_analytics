version: 2

models:
  - name: dim_results
    description: |
      Dimension table for student results. This table contains detailed results information, grades, attendance, and WASSCE pass/fail status for each student across multiple subjects and academic terms. The `dim_results` table enriches the `stg_results` table by adding calculated fields such as average scores, grades, and pass/fail status.

    columns:
      - name: student_id
        description: "Unique identifier for each student, linking this dimension to other fact and dimension tables."
        data_tests:
          - not_null
          - relationships:
              field: student_id
              to: ref('dim_students')
          - relationships:
              field: student_id
              to: ref('dim_parents')
          - relationships:
              field: student_id
              to: ref('dim_health_records')
          - relationships:
              field: student_id
              to: ref('dim_extracurricular_activities')

      - name: name
        description: "Full name of the student."
        data_tests:
          - not_null

      - name: stream
        description: "Academic stream that the student belongs to (e.g., 'Commercial', 'Basic Science and Maths')."
        data_tests:
          - not_null

      - name: academic_year
        description: "The academic year associated with the result (e.g., '2022/2023')."
        data_tests:
          - not_null

      - name: class_arm
        description: "Class arm for the student (e.g., 'A', 'B')."
        data_tests:
          - not_null

      - name: grade_level
        description: "The student's grade level (e.g., 'SS1', 'SS2')."
        data_tests:
          - not_null

      - name: term
        description: "Academic term for the result (e.g., 'First', 'Second')."
        data_tests:
          - not_null

      # Columns for each subject
      # Core Subjects
      - name: english_language_ca1
        description: "Continuous Assessment 1 score for English Language."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: english_language_ca2
        description: "Continuous Assessment 2 score for English Language."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: english_language_total
        description: "Total score for English Language combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: english_language_grade
        description: "Calculated grade for English Language based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: english_language_pass
        description: "Pass/Fail status for English Language. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: english_language_attendance
        description: "Attendance percentage for English Language."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: english_language_teacher_remarks
        description: "Teacher's remarks on student's performance in English Language."

      - name: mathematics_ca1
        description: "Continuous Assessment 1 score for Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: mathematics_ca2
        description: "Continuous Assessment 2 score for Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: mathematics_total
        description: "Total score for Mathematics combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: mathematics_grade
        description: "Calculated grade for Mathematics based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: mathematics_pass
        description: "Pass/Fail status for Mathematics. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: mathematics_attendance
        description: "Attendance percentage for Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: mathematics_teacher_remarks
        description: "Teacher's remarks on student's performance in Mathematics."

      - name: civic_education_ca1
        description: "Continuous Assessment 1 score for Civic Education."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: civic_education_ca2
        description: "Continuous Assessment 2 score for Civic Education."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: civic_education_total
        description: "Total score for Civic Education combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: civic_education_grade
        description: "Calculated grade for Civic Education based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: civic_education_pass
        description: "Pass/Fail status for Civic Education. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: civic_education_attendance
        description: "Attendance percentage for Civic Education."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: civic_education_teacher_remarks
        description: "Teacher's remarks on student's performance in Civic Education."

      # Elective Subjects: Basic Science and Maths
      - name: biology_ca1
        description: "Continuous Assessment 1 score for Biology."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: biology_ca2
        description: "Continuous Assessment 2 score for Biology."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: biology_total
        description: "Total score for Biology combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: biology_grade
        description: "Calculated grade for Biology based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: biology_pass
        description: "Pass/Fail status for Biology. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: biology_attendance
        description: "Attendance percentage for Biology."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: biology_teacher_remarks
        description: "Teacher's remarks on student's performance in Biology."

      - name: chemistry_ca1
        description: "Continuous Assessment 1 score for Chemistry."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: chemistry_ca2
        description: "Continuous Assessment 2 score for Chemistry."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: chemistry_total
        description: "Total score for Chemistry combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: chemistry_grade
        description: "Calculated grade for Chemistry based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: chemistry_pass
        description: "Pass/Fail status for Chemistry. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: chemistry_attendance
        description: "Attendance percentage for Chemistry."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: chemistry_teacher_remarks
        description: "Teacher's remarks on student's performance in Chemistry."

      - name: further_mathematics_ca1
        description: "Continuous Assessment 1 score for Further Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: further_mathematics_ca2
        description: "Continuous Assessment 2 score for Further Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: further_mathematics_total
        description: "Total score for Further Mathematics combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: further_mathematics_grade
        description: "Calculated grade for Further Mathematics based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: further_mathematics_pass
        description: "Pass/Fail status for Further Mathematics. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: further_mathematics_attendance
        description: "Attendance percentage for Further Mathematics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: further_mathematics_teacher_remarks
        description: "Teacher's remarks on student's performance in Further Mathematics."

      - name: technical_drawing_ca1
        description: "Continuous Assessment 1 score for Technical Drawing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: technical_drawing_ca2
        description: "Continuous Assessment 2 score for Technical Drawing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: technical_drawing_total
        description: "Total score for Technical Drawing combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: technical_drawing_grade
        description: "Calculated grade for Technical Drawing based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: technical_drawing_pass
        description: "Pass/Fail status for Technical Drawing. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: technical_drawing_attendance
        description: "Attendance percentage for Technical Drawing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: technical_drawing_teacher_remarks
        description: "Teacher's remarks on student's performance in Technical Drawing."

      - name: food_and_nutrition_ca1
        description: "Continuous Assessment 1 score for Food and Nutrition."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: food_and_nutrition_ca2
        description: "Continuous Assessment 2 score for Food and Nutrition."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: food_and_nutrition_total
        description: "Total score for Food and Nutrition combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: food_and_nutrition_grade
        description: "Calculated grade for Food and Nutrition based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: food_and_nutrition_pass
        description: "Pass/Fail status for Food and Nutrition. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: food_and_nutrition_attendance
        description: "Attendance percentage for Food and Nutrition."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: food_and_nutrition_teacher_remarks
        description: "Teacher's remarks on student's performance in Food and Nutrition."

      - name: agricultural_science_ca1
        description: "Continuous Assessment 1 score for Agricultural Science."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: agricultural_science_ca2
        description: "Continuous Assessment 2 score for Agricultural Science."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: agricultural_science_total
        description: "Total score for Agricultural Science combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: agricultural_science_grade
        description: "Calculated grade for Agricultural Science based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: agricultural_science_pass
        description: "Pass/Fail status for Agricultural Science. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: agricultural_science_attendance
        description: "Attendance percentage for Agricultural Science."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: agricultural_science_teacher_remarks
        description: "Teacher's remarks on student's performance in Agricultural Science."

      - name: financial_accounting_ca1
        description: "Continuous Assessment 1 score for Financial Accounting."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: financial_accounting_ca2
        description: "Continuous Assessment 2 score for Financial Accounting."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: financial_accounting_total
        description: "Total score for Financial Accounting combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: financial_accounting_grade
        description: "Calculated grade for Financial Accounting based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: financial_accounting_pass
        description: "Pass/Fail status for Financial Accounting. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: financial_accounting_attendance
        description: "Attendance percentage for Financial Accounting."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: financial_accounting_teacher_remarks
        description: "Teacher's remarks on student's performance in Financial Accounting."

      - name: book_keeping_ca1
        description: "Continuous Assessment 1 score for Book Keeping."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: book_keeping_ca2
        description: "Continuous Assessment 2 score for Book Keeping."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: book_keeping_total
        description: "Total score for Book Keeping combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: book_keeping_grade
        description: "Calculated grade for Book Keeping based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: book_keeping_pass
        description: "Pass/Fail status for Book Keeping. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: book_keeping_attendance
        description: "Attendance percentage for Book Keeping."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: book_keeping_teacher_remarks
        description: "Teacher's remarks on student's performance in Book Keeping."

      - name: commerce_ca1
        description: "Continuous Assessment 1 score for Commerce."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: commerce_ca2
        description: "Continuous Assessment 2 score for Commerce."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: commerce_total
        description: "Total score for Commerce combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: commerce_grade
        description: "Calculated grade for Commerce based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: commerce_pass
        description: "Pass/Fail status for Commerce. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: commerce_attendance
        description: "Attendance percentage for Commerce."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: commerce_teacher_remarks
        description: "Teacher's remarks on student's performance in Commerce."

      - name: data_processing_ca1
        description: "Continuous Assessment 1 score for Data Processing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: data_processing_ca2
        description: "Continuous Assessment 2 score for Data Processing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: data_processing_total
        description: "Total score for Data Processing combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: data_processing_grade
        description: "Calculated grade for Data Processing based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: data_processing_pass
        description: "Pass/Fail status for Data Processing. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: data_processing_attendance
        description: "Attendance percentage for Data Processing."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: data_processing_teacher_remarks
        description: "Teacher's remarks on student's performance in Data Processing."

      - name: economics_ca1
        description: "Continuous Assessment 1 score for Economics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: economics_ca2
        description: "Continuous Assessment 2 score for Economics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: economics_total
        description: "Total score for Economics combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: economics_grade
        description: "Calculated grade for Economics based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: economics_pass
        description: "Pass/Fail status for Economics. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: economics_attendance
        description: "Attendance percentage for Economics."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: economics_teacher_remarks
        description: "Teacher's remarks on student's performance in Economics."

      - name: government_ca1
        description: "Continuous Assessment 1 score for Government."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: government_ca2
        description: "Continuous Assessment 2 score for Government."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: government_total
        description: "Total score for Government combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: government_grade
        description: "Calculated grade for Government based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: government_pass
        description: "Pass/Fail status for Government. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: government_attendance
        description: "Attendance percentage for Government."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: government_teacher_remarks
        description: "Teacher's remarks on student's performance in Government."

      - name: literature_in_english_ca1
        description: "Continuous Assessment 1 score for Literature in English."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: literature_in_english_ca2
        description: "Continuous Assessment 2 score for Literature in English."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: literature_in_english_total
        description: "Total score for Literature in English combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: literature_in_english_grade
        description: "Calculated grade for Literature in English based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: literature_in_english_pass
        description: "Pass/Fail status for Literature in English. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: literature_in_english_attendance
        description: "Attendance percentage for Literature in English."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: literature_in_english_teacher_remarks
        description: "Teacher's remarks on student's performance in Literature in English."

      - name: christian_religion_knowledge_ca1
        description: "Continuous Assessment 1 score for Christian Religion Knowledge."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: christian_religion_knowledge_ca2
        description: "Continuous Assessment 2 score for Christian Religion Knowledge."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: christian_religion_knowledge_total
        description: "Total score for Christian Religion Knowledge combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: christian_religion_knowledge_grade
        description: "Calculated grade for Christian Religion Knowledge based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: christian_religion_knowledge_pass
        description: "Pass/Fail status for Christian Religion Knowledge. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: christian_religion_knowledge_attendance
        description: "Attendance percentage for Christian Religion Knowledge."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: christian_religion_knowledge_teacher_remarks
        description: "Teacher's remarks on student's performance in Christian Religion Knowledge."

      - name: geography_ca1
        description: "Continuous Assessment 1 score for Geography."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: geography_ca2
        description: "Continuous Assessment 2 score for Geography."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: geography_total
        description: "Total score for Geography combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: geography_grade
        description: "Calculated grade for Geography based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: geography_pass
        description: "Pass/Fail status for Geography. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: geography_attendance
        description: "Attendance percentage for Geography."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: geography_teacher_remarks
        description: "Teacher's remarks on student's performance in Geography."

      - name: fine_art_ca1
        description: "Continuous Assessment 1 score for Fine Art."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: fine_art_ca2
        description: "Continuous Assessment 2 score for Fine Art."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 15
      - name: fine_art_total
        description: "Total score for Fine Art combining CA1, CA2, and exam scores."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 70
      - name: fine_art_grade
        description: "Calculated grade for Fine Art based on total score."
        data_tests:
          - accepted_values:
              values: ['A1', 'B2', 'B3', 'C4', 'C5', 'C6', 'D7', 'E8', 'F9']
      - name: fine_art_pass
        description: "Pass/Fail status for Fine Art. A pass is any grade 'C6' or above."
        data_tests:
          - accepted_values:
              values: ['Pass', 'Fail']
      - name: fine_art_attendance
        description: "Attendance percentage for Fine Art."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: fine_art_teacher_remarks
        description: "Teacher's remarks on student's performance in Fine Art."
      - name: aggregate_attendance_percentage
        description: "Overall attendance percentage across all subjects for the student."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: average_total_score
        description: "Average total score across all subjects."
        data_tests:
          - between_or_null:
              lower_bound: 0
              upper_bound: 100
      - name: wassce_pass
        description: |
          WASSCE Pass/Fail status based on grades in core subjects (English, Mathematics) and at least three other elective subjects.
        data_tests:
          - accepted_values:
              values: ['WASSCE Pass', 'WASSCE Fail']

      - name: created_at
        description: "Timestamp indicating when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp indicating when the record was last updated."
        data_tests:
          - not_null

  - name: dim_students
    description: |
      Dimension table for student demographics. This table contains enriched student data such as age and registration year, serving as a reference for linking with results, health records, and other student-related fact tables.

    columns:
      - name: student_id
        description: "Primary key for this table and foreign key to results and health records tables."
        data_tests:
          - unique
          - not_null
          - relationships:
              to: ref('dim_results')
              field: student_id
              
      - name: first_name
        description: "Student's first name."
        data_tests:
          - not_null

      - name: middle_name
        description: "Student's middle name, if applicable."
        data_tests:
          - not_null

      - name: last_name
        description: "Student's last name."
        data_tests:
          - not_null

      - name: gender
        description: "Gender of the student."

      - name: date_of_birth
        description: "Date of birth of the student."
        data_tests:
          - not_null

      - name: age
        description: |
          "Calculated age of the student based on their date of birth.
           Used for categorizing students based on age groups."
        data_tests:
          - not_null

      - name: stream
        description: "The academic stream the student belongs to (e.g., 'Commercial', 'Basic Science and Maths')."
        data_tests:
          - not_null

      - name: grade_level
        description: "The student's grade level (e.g., 'SS1', 'JS2')."
        data_tests:
          - not_null

      - name: blood_group
        description: "Blood group of the student."

      - name: genotype
        description: "Genotype of the student."

      - name: state_of_origin
        description: "State of origin of the student."

      - name: address
        description: "Residential address of the student."

      - name: parent_id
        description: "Foreign key linking to the parents table."
        data_tests:
          - not_null
          - relationships:
              to: ref('dim_parents')
              field: parent_id

      - name: registration_date
        description: "Date when the student was registered."
        data_tests:
          - not_null

      - name: registration_year
        description: "Year extracted from the registration date for reference."
        data_tests:
          - not_null

      - name: created_at
        description: "Timestamp indicating when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp for the last update to the record."
        data_tests:
          - not_null

  - name: dim_parents
    description: |
      Dimension table for parent demographics. This table contains detailed parent information including their contact details, relationship to students, and occupation. It serves as a reference for linking to the `dim_students` table and tracking parent-related data across various student records.

    columns:
      - name: parent_id
        description: "Primary key for this table and foreign key in students table."
        data_tests:
          - unique
          - not_null
          - relationships:
              to: ref('dim_students')
              field: parent_id

      - name: first_name
        description: "Parent's first name."
        data_tests:
          - not_null

      - name: middle_name
        description: "Parent's middle name, if applicable."
        data_tests:
          - not_null

      - name: last_name
        description: "Parent's last name."
        data_tests:
          - not_null

      - name: gender
        description: "Gender of the parent."

      - name: marital_status
        description: "Marital status of the parent (e.g., 'Married', 'Single')."

      - name: phone_number
        description: "Contact phone number of the parent."
        data_tests:
          - unique
          - not_null

      - name: email
        description: "Email address of the parent."
        data_tests:
          - unique
          - not_null

      - name: address
        description: "Home address of the parent."

      - name: occupation
        description: "Parent's occupation."

      - name: relationship_to_student
        description: |
          "Parent's relationship to the student (e.g., 'Father', 'Mother').
           Provides context for linking parents to student records."
        data_tests:
          - not_null

      - name: created_at
        description: "Timestamp when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp indicating when the record was last updated."
        data_tests:
          - not_null

  - name: dim_teachers
    description: |
      This dimension table contains enriched information about teachers, including their qualifications, years of experience, and subjects taught. It serves as a reference for understanding teacher demographics, linking to extracurricular activities, and supporting performance evaluations.

    columns:
      - name: teacher_id
        description: "Primary key for this table, linking to `fact_activities` and other related tables."
        data_tests:
          - unique
          - not_null

      - name: first_name
        description: "Teacher's first name."
      
      - name: middle_name
        description: "Teacher's middle name, if applicable."

      - name: last_name
        description: "Teacher's last name."

      - name: gender
        description: "Teacher's gender."

      - name: date_of_birth
        description: "Teacher's date of birth."
      
      - name: age
        description: "Calculated age based on the date of birth."
        data_tests:
          - not_null
          - range:
              min_value: 20
              max_value: 75

      - name: phone_number
        description: "Contact phone number of the teacher."
        data_tests:
          - unique

      - name: email
        description: "Email address of the teacher."
        data_tests:
          - unique

      - name: address
        description: "Residential address of the teacher."

      - name: hire_date
        description: "Date the teacher was hired."
      
      - name: subject
        description: "Subject taught by the teacher."

      - name: qualification
        description: "Teacher's highest qualification (e.g., B.Ed., M.Sc.)."
      
      - name: years_of_experience
        description: "Number of years of teaching experience."
        data_tests:
          - range:
              min_value: 0
              max_value: 50

      - name: number_of_activities
        description: "Count of extracurricular activities overseen by the teacher."
      
      - name: activities_list
        description: "List of extracurricular activities overseen by the teacher."

      - name: created_at
        description: "Timestamp indicating when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp indicating when the record was last updated."
        data_tests:
          - not_null

  - name: dim_extracurricular_activities
    description: |
      Dimension table for student extracurricular activities. This table records each student's participation level and other relevant information for various activities, such as sports or clubs. It links directly to the `dim_students` and `dim_teachers` tables for better insights into student and teacher engagement outside of academic performance.

    columns:
      - name: activity_id
        description: "Unique identifier for each extracurricular activity."
        data_tests:
          # - unique #Should be unique, but current data is faulty
          - not_null

      - name: activity_name
        description: "Name of the extracurricular activity (e.g., Soccer, Debate Club)."

      - name: student_id
        description: "Foreign key linking to the `dim_students` table."
        data_tests:
          - not_null
          - relationships:
              field: student_id
              to: ref('dim_students')

      - name: participation_level
        description: "Level of student participation in the activity: 'Beginner', 'Intermediate', or 'Advanced'."

      - name: teacher_id
        description: "Foreign key linking to the `dim_teachers` table."
        data_tests:
          - relationships:
              field: teacher_id
              to: ref('dim_teachers')

      - name: date_joined
        description: "Date when the student joined the activity."

      - name: created_at
        description: "Timestamp indicating when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp indicating the last update to the record."
        data_tests:
          - not_null

  - name: dim_health_records
    description: |
      Dimension table for student health records. This table contains information on health checkups, treatments, and follow-ups for students. It enriches the `stg_health_records` table by capturing the number of checkups, unique health issues, and total hospital admissions.

    columns:
      - name: record_id
        description: "Primary key for the health record table."
        data_tests:
          - unique
          - not_null

      - name: student_id
        description: "Foreign key linking to the students table."
        data_tests:
          - not_null
          - relationships:
              field: student_id
              to: ref('dim_students')

      - name: checkup_date
        description: "Date of the health checkup."

      - name: health_issues
        description: "Description of any health issues identified during the checkup."

      - name: treatment
        description: "Treatment recommended or administered for the health issues."

      - name: admitted
        description: "Indicates if the student was admitted to a hospital/clinic."

      - name: admission_date
        description: "Date of admission to the hospital/clinic, if applicable."

      - name: discharge_date
        description: "Date of discharge from the hospital/clinic, if applicable."

      - name: doctor
        description: "Name of the doctor or medical personnel attending to the student."

      - name: follow_up_date
        description: "Scheduled date for a follow-up, if applicable."

      - name: number_of_health_checkups
        description: "Total number of health checkups conducted for the student."
        data_tests:
          - not_null

      - name: unique_health_issues
        description: "Number of unique health issues recorded for the student."

      - name: total_admissions
        description: "Total number of hospital admissions."

      - name: doctors_consulted
        description: "Number of distinct doctors consulted for the student."

      - name: total_days_admitted
        description: "Total days spent in hospital admissions."

      - name: follow_up_visits
        description: "Total number of follow-up visits for the student."

      - name: created_at
        description: "Timestamp indicating when the record was created."
        data_tests:
          - not_null

      - name: updated_at
        description: "Timestamp indicating when the record was last updated."
        data_tests:
          - not_null
